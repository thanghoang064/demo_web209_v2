{"ast":null,"code":"// ddinh nghia khuon mau sinh vien co clj\n\n// dinh nghia 1 cái action\n\nexport function addSinhVien(sv) {\n  return async dispatch => {\n    try {\n      const response = await fetch('http://localhost:3001/student', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(sv)\n      });\n      if (!response.ok) {\n        throw new Error('Error adding student');\n      }\n      const data = await response.json();\n\n      // Thực hiện các tác vụ cần thiết sau khi gửi dữ liệu thành công\n      // Ví dụ: dispatch action để cập nhật danh sách sinh viên\n      dispatch({\n        type: 'add-sv',\n        payload: data\n      });\n    } catch (error) {\n      console.log('Error:', error);\n    }\n  };\n}\nexport function deleteSinhVien(sv) {\n  return async dispatch => {\n    try {\n      const response = await fetch(`http://localhost:3001/student/${sv.id}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        throw new Error('Error deleting student');\n      }\n\n      // Thực hiện các tác vụ cần thiết sau khi xóa thành công\n      // Ví dụ: dispatch action để cập nhật danh sách sinh viên\n      dispatch({\n        type: 'xoa-sv',\n        payload: sv\n      });\n    } catch (error) {\n      console.log('Error:', error);\n    }\n  };\n}\nexport const fetchSinhViensAction = () => {\n  console.log('fetchSinhViensAction');\n  return async dispatch => {\n    try {\n      // dispatch({\n      //     type: 'get-sv',\n      //     payload: {\n      //         error: null,\n      //         loading: false,\n      //         sinhviens: []\n      //     }\n      // });\n      const response = await fetch('http://localhost:3001/student');\n      const data = await response.json();\n      console.log(\"123\", data);\n      dispatch({\n        type: 'get-sv',\n        payload: {\n          error: null,\n          loading: false,\n          sinhviens: data\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const loadingSinhVien = function () {\n  let loading = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  return dispatch => {\n    dispatch({\n      type: 'loading-sv',\n      payload: loading\n    });\n  };\n};\nexport const detailSinhVien = sv => {\n  return dispatch => {\n    dispatch({\n      type: 'ct-sv',\n      payload: {\n        error: null,\n        loading: false,\n        sinhviens: [sv]\n      }\n    });\n  };\n};","map":{"version":3,"names":["addSinhVien","sv","dispatch","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","type","payload","error","console","log","deleteSinhVien","id","fetchSinhViensAction","loading","sinhviens","loadingSinhVien","arguments","length","undefined","detailSinhVien"],"sources":["/Users/hoangthang/Desktop/react/demo_web209_v2/src/store/sinhvien/action.ts"],"sourcesContent":["import { AddSVDispatchType, DeleteSVDispatchType, DetailSvDispatchType, GetListSVDispatchType, LoadingSvDispatchType } from \"./type\"\n\n// ddinh nghia khuon mau sinh vien co clj\nexport interface ISinhVien {\n    id: number\n    ten: string,\n    namsinh: number\n}\n\ninterface IGetListSvPayload {\n    sinhviens: ISinhVien[]\n    loading: boolean\n    error: unknown\n}\n\n// dinh nghia 1 cái action\n\nexport interface GetListSinhVienAction {\n    type: 'get-sv', // phân biệt được action đấy là action gì (Thêm , Xóa , Sửa)\n    payload: IGetListSvPayload// là dữ liệu được gửi đến cái tk lozz reducer để xử lý\n}\n\nexport type AddSinhVienAction = {\n    type: 'add-sv', // phân biệt được action đấy là action gì (Thêm , Xóa , Sửa)\n    payload: ISinhVien// là dữ liệu được gửi đến cái tk lozz reducer để xử lý\n}\n\nexport type LoadingSinhVienAction = {\n    type: 'loading-sv',\n    payload: boolean\n}\n\nexport type DeleteSinhVienAction = {\n    type: 'xoa-sv', // phân biệt được action đấy là action gì (Thêm , Xóa , Sửa)\n    payload: ISinhVien// là dữ liệu được gửi đến cái tk lozz reducer để xử lý\n}\nexport type DetailSinhVienAction = {\n    type : 'ct-sv',\n    payload: ISinhVien\n}\n\nexport function addSinhVien(sv: ISinhVien) {\n    return async (dispatch: AddSVDispatchType) => {\n        try {\n            const response = await fetch('http://localhost:3001/student', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(sv)\n            });\n\n            if (!response.ok) {\n                throw new Error('Error adding student');\n            }\n\n            const data = await response.json();\n\n            // Thực hiện các tác vụ cần thiết sau khi gửi dữ liệu thành công\n            // Ví dụ: dispatch action để cập nhật danh sách sinh viên\n            dispatch({\n                type: 'add-sv',\n                payload: data\n            });\n        } catch (error) {\n            console.log('Error:', error);\n        }\n    };\n}\nexport function deleteSinhVien(sv: ISinhVien) {\n    return async (dispatch: DeleteSVDispatchType) => {\n        try {\n            const response = await fetch(`http://localhost:3001/student/${sv.id}`, {\n                method: 'DELETE'\n            });\n\n            if (!response.ok) {\n                throw new Error('Error deleting student');\n            }\n\n            // Thực hiện các tác vụ cần thiết sau khi xóa thành công\n            // Ví dụ: dispatch action để cập nhật danh sách sinh viên\n            dispatch({\n                type: 'xoa-sv',\n                payload: sv\n            });\n\n        } catch (error) {\n            console.log('Error:', error);\n        }\n    };\n}\nexport const fetchSinhViensAction = () => {\n    console.log('fetchSinhViensAction')\n    return async (dispatch: GetListSVDispatchType) => {\n        try {\n            // dispatch({\n            //     type: 'get-sv',\n            //     payload: {\n            //         error: null,\n            //         loading: false,\n            //         sinhviens: []\n            //     }\n            // });\n            const response = await fetch('http://localhost:3001/student');\n            const data: ISinhVien[] = await response.json();\n            console.log(\"123\", data);\n            dispatch({\n                type: 'get-sv',\n                payload: {\n                    error: null,\n                    loading: false,\n                    sinhviens: data\n                }\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    };\n};\n\n\nexport const loadingSinhVien = (loading = false) => {\n    return (dispatch: LoadingSvDispatchType) => {\n        dispatch({\n            type: 'loading-sv',\n            payload: loading\n        })\n    }\n}\n\n\nexport const detailSinhVien = (sv: ISinhVien) => {\n    return (dispatch: DetailSvDispatchType) => {\n        dispatch({\n            type: 'ct-sv',\n            payload: {\n                error: null,\n                loading: false,\n                sinhviens: [sv]\n            }\n        })\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}